<md-dialog aria-label="Mango (Fruit)">
  <form>
    <md-toolbar>
      <div class="md-toolbar-tools">
        <h2>{{webentity.name}}</h2>
        <span flex></span>
        <md-button class="md-icon-button" ng-click="cancel()">
          <md-icon aria-label="Close dialog">close</md-icon>
        </md-button>
      </div>
    </md-toolbar>
    <md-dialog-content style="max-width:800px;max-height:810px; ">
      <md-tabs md-dynamic-height md-border-bottom>
        <md-tab label="Start pages">
          <div layout="column">
            <md-list class="md-dense" flex style="overflow-y: auto">
              <md-list-item
                ng-repeat="url in startpages track by $index"
                class="md-2-line"
                ng-class="{'wesp-modal-loading' : lookups[url].status == 'loading', 'wesp-modal-removed': removed[url]}"
              >
                <!-- Avatar -->
                <div class="md-avatar" ng-if="lookups[url].status == 'loading'" layout="column" layout-align="center center">
                  <minispinner></minispinner>
                </div>
                <md-icon
                  ng-if="lookups[url].status == 'success'"
                  class="md-avatar-icon"
                  title="Lookup {{lookups[url].status}}"
                >done</md-icon>
                <md-icon
                  ng-if="lookups[url].status == 'issue'"
                  class="md-avatar-icon md-warn"
                  title="Lookup {{lookups[url].status}}"
                  md-colors="{'background': 'default-warn'}"
                >warning</md-icon>

                <div class="md-list-item-text">
                  <h3>
                    <div class="url-container">
                      <span class="url url-break">
                        <span>
                          <a href="{{url}}" target="_blank" title="Open in a new tab">
                            <md-icon>link</md-icon>
                          </a>
                          {{url}}
                        </span>
                      </span>
                    </div>          
                  </h3>
                  <p>
                    <span
                      ng-if=" lookups[url].status == 'issue'"
                      md-colors="{'color': 'default-warn'}"
                    >
                      <md-tooltip md-direction="left">HTTP code: {{lookups[url].httpStatus}}</md-tooltip>
                      {{lookups[url].httpStatus|explicitHttpCode}}
                    </span>
                    <span
                      ng-if="lookups[url].status == 'fail'"
                      md-colors="{'color': 'default-warn'}"
                    >
                      lookup fail
                    </span>
                  </p>
                </div>
                <md-button ng-click="removeStartPage(url)" class="md-secondary md-icon-button">
                  <md-icon>close</md-icon>
                </md-button>
              </md-list-item>
            </md-list>
          </div>
        </md-tab>
        <md-tab label="two">
          <md-content class="md-padding">
            <h1 class="md-display-2">Tab Two</h1>
            <p>Lorem ipsum dolor sit amet</p>
          </md-content>
        </md-tab>
      </md-tabs>
    </md-dialog-content>

    <md-dialog-actions layout="row">
      <md-button href="http://en.wikipedia.org/wiki/Mango" target="_blank" md-autofocus>
        More on Wikipedia
      </md-button>
      <span flex></span>
      <md-button ng-click="answer('not useful')" >
        Not Useful
      </md-button>
      <md-button ng-click="answer('useful')" style="margin-right:20px;" >
        Useful
      </md-button>
    </md-dialog-actions>
  </form>
</md-dialog>

<!-- <div class="modal-header">
  <h3 class="modal-title">{{webentity.name}}</h3>
</div>
<div class="modal-body">

  <div collapse="collapseProgressBar" >
    <progressbar ng-if="startpagesSummary.percent == 0" value="100" class="progress-striped active" >startpage{{startpages.length | plural}}</progressbar>
    <progressbar ng-if="startpagesSummary.percent > 0" value="startpagesSummary.percent" >{{startpagesSummary.percent}}% tested</progressbar>
  </div>

  <div>
    <div class="input-group" ng-class="{'has-error': newStartPagesInvalid}">
      <span class="input-group-addon">ADD START PAGES</span>
      <input
        type="textarea"
        id="add-sp-{{webentity.id}}"
        class="form-control input-sm start-page-input"
        ng-model="newStartPagesURLs"
        ng-change="validateNewStartPages()"
        ng-press-enter="addStartPages()"
        placeholder="Enter one or multiple URLs"
      >
      <span class="input-group-btn">
        <button
          type="button"
          class="btn btn-default btn-sm"
          ng-click="addStartPages()"
          ng-disabled="newStartPagesInvalid"
        >
          OK
        </button>
      </span>
    </div>
    <p class="startpages-report" ng-show="urlsToAdd.length > 1 || urlErrors.length" ng-class="{'startpages-valid': !urlErrors.length}">
      {{urlsToAdd.length}} unique new URL{{urlsToAdd.length | plural}} found<span ng-show="urlErrors.length"> and {{urlErrors.length}} error{{urlErrors.length | plural}}:</span>
    </p>
    <ul class="startpages-report clearboth" ng-show="urlErrors.length">
      <li ng-repeat="err in urlErrors track by $index">
        {{err}}
      </li>
    </ul>
    <br class="clearboth">
  </div>

  <div collapse="!collapseProgressBar">

    <div ng-show="startpagesSummary.diagnostic.ready">
      <h4 class="text-success">READY TO CRAWL</h4>
      <p ng-show="startpagesSummary.diagnostic.issues" class="text-success">
        At least one page is valid, allowing the crawl to start successfully.
      </p>
      <p ng-show="startpagesSummary.diagnostic.issues" class="text-warning">
        A little warning, though.
        <br>
        Some start pages have issues and cannot be crawled. It will not block the crawl but you may want to fix this.
      </p>
    </div>

    <div ng-show="startpagesSummary.diagnostic.doomed">
      <h4 class="text-danger">DOOMED CRAWL</h4>
      <p class="text-danger">
        This web entity has no valid start page. Hyphe will not be able to start crawling it.
      </p>
      <p class="text-muted">
        You can still try to launch it, though. Miracles happen.
      </p>
    </div>

  </div>

</div>
<div class="modal-footer">
  <button class="btn btn-primary" ng-click="ok()">OK</button>
</div>
